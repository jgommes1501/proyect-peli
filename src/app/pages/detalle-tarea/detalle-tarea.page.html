<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-title>Detalle de Película</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-card *ngIf="pelicula">
    <div style="display: flex; align-items: flex-start; gap: 16px;">
      <img [src]="pelicula.img" [alt]="pelicula.nombre" style="width: 75%; height: 1000px; object-fit: contain; border-radius: 8px;" />
      
      <div style="width: 25%;">
        <ion-card-header style="padding: 0;">
          <ion-card-title>
            <ion-input
              *ngIf="editando"
              type="text"
              [(ngModel)]="pelicula.nombre"
              placeholder="Nombre de la película"
            ></ion-input>
            <span *ngIf="!editando">{{ pelicula.nombre }}</span>
          </ion-card-title>
          <ion-card-subtitle>
            Director:
            <ion-input
              *ngIf="editando"
              type="text"
              [(ngModel)]="pelicula.autor"
              placeholder="Autor/Director"
              style="margin-top: 4px;"
            ></ion-input>
            <span *ngIf="!editando">{{ pelicula.autor }}</span>
          </ion-card-subtitle>
        </ion-card-header>
        
        <ion-card-content style="padding: 16px 0 0 0;">
          <h3>Descripción:</h3>
          <ion-textarea
            *ngIf="editando"
            [(ngModel)]="pelicula.descripcion"
            placeholder="Descripción"
            style="margin-top: 8px;"
          ></ion-textarea>
          <p *ngIf="!editando">{{ pelicula.descripcion }}</p>

          <h3 *ngIf="editando" style="margin-top: 16px;">URL de Imagen:</h3>
          <ion-input
            *ngIf="editando"
            type="text"
            [(ngModel)]="pelicula.img"
            placeholder="URL de la imagen"
            style="margin-top: 4px;"
          ></ion-input>
          
          <!-- Botones de acción -->
          <div style="display: flex; gap: 8px; margin-top: 16px; flex-direction: column;">
            <ion-button
              *ngIf="!editando"
              expand="block"
              color="primary"
              (click)="editando = true"
            >
              Editar Película
            </ion-button>

            <ion-button
              *ngIf="editando"
              expand="block"
              color="success"
              (click)="guardarCambios()"
            >
              Guardar Cambios
            </ion-button>

            <ion-button
              *ngIf="editando"
              expand="block"
              color="medium"
              (click)="editando = false"
            >
              Cancelar
            </ion-button>

            <ion-button
              expand="block"
              color="danger"
              (click)="eliminarPelicula()"
            >
              Eliminar Película
            </ion-button>
          </div>
        </ion-card-content>
      </div>
    </div>
  </ion-card>

  <ion-card *ngIf="!pelicula">
    <ion-card-content>
      <p>No se encontró la película.</p>
    </ion-card-content>
  </ion-card>
</ion-content>
